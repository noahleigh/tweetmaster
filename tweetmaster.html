<head>
    <title>tweetmaster</title>
</head>

<body>
    <h1>Welcome to tweetmaster</h1>
    <!-- Either display the sign-up form, or greet the user -->
    {{#if currentUser}}
    	<h2>Hello {{currentUser.profile.firstname}}, you're logged in!</h2> 
    	{{> userinfo}} 

    	{{> logout}}

        {{> tweetentry}}

        {{> tweetfeed}}
	{{else}}
		<h2>Login Form</h2>
		{{> login}}
    	<h2>Sign up form</h2> 
    	{{> signup}} 
	{{/if}}
</body>

<!-- TEMPLATES -->

<!-- Our own login form -->
<template name="login">
    <form id="login" action="post">
        <label for="login-email">Email</label>
        <input type="email" id="login-email" name="login-email" placeholder="janedoe@example.com" required>
        <label for="login-password">Password</label>
        <input type="password" id="login-password" name="login-password" required>
        <input type="submit" id="login-button" value="Login">
    </form>
</template>

<!-- Our own sign-up form -->
<template name="signup">
    <form id="sign-up" action="post">
        <label for="sign-up-first-name">First Name</label>
        <input type="text" id="sign-up-first-name" name="first-name" placeholder="Jane" required>
        <label for="sign-up-last-name">Last Name</label>
        <input type="text" id="sign-up-last-name" name="last-name" placeholder="Doe" required>
        <label for="sign-up-email">Email</label>
        <input type="email" id="sign-up-email" name="sign-up-email" placeholder="janedoe@example.com" required>
        <label for="sign-up-password">Password</label>
        <input type="password" id="sign-up-password" name="sign-up-password" required>
        <input type="submit" id="sign-up-button" value="Sign Up">
    </form>
</template>

<!-- Our own logout button -->
<template name="logout">
	<form id="logout" action="post">
  		<input type="submit" value="Logout">
  	</form>
</template>

<!-- Displays basic info for the currently logged-in user. -->
<template name="userinfo">
    <ul id="userinfo">
        <li>Internal ID: <span class="monospace">{{internalId}}</span></li>
        <li>First Name: <span class="monospace">{{currentUser.profile.firstname}}</span></li>
        <li>Last Name: <span class="monospace">{{currentUser.profile.lastname}}</span></li>
        <li>Email: <span class="monospace">{{email}}</span></li>
    </ul>
</template>

<!-- Tweet Entry Form -->
<template name="tweetentry">
    <form id="tweet-entry" action="post">
        <label for="tweet-entry-text">Compose tweet (max. 140 characters)</label>
        <textarea name="tweet-entry-text" 
                  id="tweet-entry-text" 
                  cols="50" 
                  rows="3" 
                  form="tweet-entry" 
                  maxlength="140" 
                  minlength="2" 
                  placeholder="Write your brilliant thoughts here&hellip;"></textarea>
        <input type="submit" value="Post Tweet">
    </form>
</template>

<!-- Tweet Feed-->
<template name="tweetfeed">
    <div id="feed-container">
        <ol id="feed">
            {{#each tweets}}
                <li>
                    <div class="tweet">
                        <p class="tweet-date">
                            {{createdAt}}
                        </p>
                        <p class="tweet-text">
                            {{text}}
                        </p>
                    </div>
                </li>
            {{/each}}
        </ol>
    </div>
</template>